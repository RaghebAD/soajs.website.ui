<a id="manual-deployment"></a>
<h1>Manual Deployment</h1>
<div class="white-container">
    <p>
        SOAJS can be deployed manually on both Linux and MAC platforms.<br />
	    You have chose manual installation therefore, you need to install the prerequisites manually, configure your hosts file then run the installation script and finally set up the UI.
    </p>
    <hr/>
    <h3>Prerequisites</h3>
    <p>
        SOAJS requires the following technologies to be installed on your machine:
    </p>
    <b>Ubuntu:</b>
	<pre><code class="bash"># install NodeJs, NPM, MongoDB & Nginx
$ apt-get install nodejs npm mongodb nginx
$ ln -s /usr/bin/nodejs /usr/bin/node</code></pre>
    <br/>
    <b>MAC:</b>
	<pre><code class="bash"># install NodeJs, MongoDB & Nginx
$ brew install nodejs mongodb nginx</code></pre>
	<h3>Configuration</h3>
	<p>
		The next step requires you added the below entries in your /etc/hosts file:
	</p>
	<pre><code class="bash"># add the following entries, they are explained below
127.0.0.1   dashboard-api.soajs.org
127.0.0.1   dashboard.soajs.org</code></pre>
	<p>
		The domain dashboard-api.soajs.org redirects requests to the dashboard services which allows you to manage the provisioned information in core database.
	</p>
	<h3>Installation</h3>
    <p>
        Install <a target="_blank" href="http://www.npmjs.org/packages/soajs.utilities">soajs.utilities</a> in /opt/soajs/node_modules to acquire the configuration files needed to deploy SOAJS.
    </p>
	<pre><code class="bash"># create a directory for soajs
$ mkdir -p /opt/soajs/node_modules/ && cd /opt/soajs/

# install soajs.utilities
$ npm install soajs.utilities

# move the utilities to /opt/soajs/
$ mv /opt/soajs/node_modules/soajs.utilities ../

#execute the installer script
$ cd soajs.utilities/lib/
$ ./manualDeploy.sh</code></pre>
    <em>
        The above command will install SOAJS framework and all the core services from NPM under /opt/soajs/node_modules/ then start all the services.
    </em>
	<h3>Test The Services</h3>
    <fieldset>
        <legend>URAC</legend>
        <div>
            <p>
                Perform a Heartbeat check on the service:
            </p>
            <pre><code class="bash">$ curl -X GET "http://api.soajs.org:5001/heartbeat"</code></pre>
            <p>
                URAC services runs on port 4001 making its maintenance port equal to 5001 as explained in <a href="#/documentation/core/service">service</a> section under documentation.
            </p>
            <h5>Response:</h5>
            <pre><code class="bash">{"result":true,"ts":1427373613796,"service":{"service":"URAC","type":"rest","route":"/heartbeat"}}</code></pre>
            <em>URAC is healthy ... Great!</em>
        </div>
    </fieldset>
    <fieldset>
        <legend>Dashboard</legend>
        <div>
            <p>
                Dashboard contains 2 sections, service and UI. At this stage, we are working with the service and the UI is explained below. Perform a Heartbeat check on the service:
            </p>
            <pre><code class="bash">$ curl -X GET "http://api.soajs.org:5003/heartbeat"</code></pre>
            <p>
                Dashboard services runs on port 4003 making its maintenance port equal to 5003.
            </p>
            <h5>Response:</h5>
            <pre><code class="bash">{"result":true,"ts":1427373613796,"service":{"service":"DASHBOARD","type":"rest","route":"/heartbeat"}}</code></pre>
        </div>
    </fieldset>
    <fieldset>
        <legend>Controller</legend>
        <div>
            <p>
                Perform a Heartbeat check on the service:
            </p>
            <pre><code class="bash">$ curl -X GET "http://api.soajs.org:5000/heartbeat"</code></pre>
            <p>
                The controller services runs on port 4000 making its maintenance port equal to 5000.
            </p>
            <h5>Response:</h5>
            <pre><code class="bash">{"result":true,"ts":1427373613796,"service":{"service":"CONTROLLER","type":"rest","route":"/heartbeat"}}</code></pre>
        </div>
    </fieldset>
    <h3>Set Up the UI</h3>
    <p>
        SOAJS is now running, the final step requires we launch the Dashboard UI, login and start working. First, you need to configure Nginx and start it:
    </p>
    <p>
        Copy the configuration files:
    </p>
    <b>Ubuntu:</b>
	<pre><code class="bash"># copy the upstream.conf
$ cd /opt/soajs/node_modules/nginx/
$ cp upstream.conf /etc/nginx/conf.d/

# copy the hosts
$ cp dash.conf /etc/nginx/sites-enabled/
$ cp api.conf /etc/nginx/sites-enabled/</code></pre>

    <b>MAC:</b>
	<pre><code class="bash"># copy the upstream.conf
$ cd /opt/soajs/node_modules/nginx/
$ cp upstream.conf /usr/local/etc/nginx/servers/

# copy the hosts
$ cp dash.conf /usr/local/etc/nginx/servers/
$ cp api.conf /usr/local/etc/nginx/servers/</code></pre>
    <p>
        Nginx will now load the configuration that SOAJS needs to run the Dashboard UI. Start Nginx:
    </p>
    <pre><code class="bash">$ sudo nginx</code></pre>
	<p>
		In your browser, go to <a target="_blank" href="http://dashboard.soajs.org">http://dashboard.soajs.org</a> and login using the administrator account. This account was created when you ran the installation script. A sample data was also imported by the script and provides the following accounts:
	</p>
    <b>Owner:</b> ( Full access to all Dashboard services )
    <ul>
        <li><b>Username:</b>&nbsp; owner</li>
        <li><b>Password:</b>&nbsp; password</li>
    </ul>
    <br/>
    <b>Client:</b> ( Limited access to Dashboard services )
    <ul>
        <li><b>Username:</b>&nbsp; client</li>
        <li><b>Password:</b>&nbsp; password</li>
    </ul>
    <p>
        Once you login, you can modify these credentials, monitor the services and perform all core operations related to <a href="#/documentation/advanced/multitenancy">Multitenancy</a>, <a href="#/documentation/advanced/productization">Productization</a>, <a href="#/documentation/advanced/environment">Multi Environment</a> and other. Checkout the <a href="#/documentation/ui/dashboard">Dashboard</a> to see what features are offered.
    </p>
</div>