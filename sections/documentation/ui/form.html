<a id="form"></a>
<h1>Dashboard UI Form</h1>
<div class="white-container">
	<p>
		The Form is a UI library that generates a form look and feel to add/update the data and submit the changes. The library is available in Dashboard UI and can be invoked by any module. The Form offers the following Features:
	</p>
	<table width="100%" class="myTable">
		<thead>
			<tr>
				<th class="noBreak">Feature</th>
				<th>Description</th>
			</tr>
		</thead>
		<tbody>
			<tr>
				<td width="15%">Rendering</td>
				<td>The form is provided with a fields array, each field is represented by a configuration object that states how it should be rendered. Based on these configuration objects, the form is populated.</td>
			</tr>
			<tr class="even">
				<td>Operation Attaching</td>
				<td>The form is passed on a list provided with the list buttons that will be displayed below the fields populate and the operations that should be triggered when these buttons are pressed.</td>
			</tr>
		</tbody>
	</table>
	<p>
		The form can be populated in two methods:
	</p>
	<ul>
		<li><b>Page Form:</b> The form will be populated and the hooks are attached, a display <a target="_blank" href="https://docs.angularjs.org/guide/directive">directive</a> is generated <b>ngform</b>. You can then use this directive anywhere on your page to print the form.</li>
		<li><b>Modal Form:</b> The form will be populated and the hooks are attached, however the form uses the <b>Modal</b> feature of AngularJS's <a target="_blank" href="http://angular-ui.github.io/bootstrap/">Bootstrap</a> and injects its <b>ngform</b> directive in it.</li>
	</ul>
	<hr/>
	<h3>Usage</h3>
	<p>
		The Form requires a configuration object that includes the fields and actions it needs to populate. Since the form can be displayed in two methods as explained above, there are two constructors provided to build it. The below table explains the parameters passed on to the form constructors.
	</p>
	<b>Build Form:</b>
	<table width="100%" class="myTable">
		<thead>
			<tr>
				<th>Parameter</th>
				<th>Description</th>
			</tr>
		</thead>
		<tbody>
			<tr>
				<td>Scope</td>
				<td>The scope of the module's controller, refer to <a href="#/documentation/ui/module">Create UI Module</a> for more information.</td>
			</tr>
			<tr class="even">
				<td>Configuration</td>
				<td>A configuration object that contains the fields and operations.</td>
			</tr>
		</tbody>
	</table>
	<br/>
	<b>Build Form in Modal:</b>
	<table width="100%" class="myTable">
		<thead>
			<tr>
				<th>Parameter</th>
				<th>Description</th>
			</tr>
		</thead>
		<tbody>
			<tr>
				<td>Scope</td>
				<td>The scope of the module's controller, refer to <a href="#/documentation/ui/module">Create UI Module</a> for more information.</td>
			</tr>
			<tr class="even">
				<td >Modal</td>
				<td>An instance of the Modal feature from AngularJS's <a target="_blank" href="http://angular-ui.github.io/bootstrap/">Bootstrap</a>.</td>
			</tr>
			<tr >
				<td>Configuration</td>
				<td>A configuration object that contains the fields and operations.</td>
			</tr>
		</tbody>
	</table>
	<br/>
	<b>Code Samples:</b>
	<pre><code class="javascript">//create a form configuration object
var config = {
	"form": {
		//specify the list of inputs and how they should be rendered
		"entries": [
			{
				'name': 'username',
				'label': 'Username',
				'type': 'text',
				'placeholder': 'Enter Username...',
				'value': '',
				'tooltip': 'Usernames are alphanumeric and support _ & - characters only',
				'required': true
			},
			{
				'name': 'email',
				'label': 'Email',
				'type': 'email',
				'placeholder': 'Enter Email...',
				'value': '',
				'tooltip': 'myemail@example.domain',
				'required': true
			}
		]
	},

	//give your form a machine name
	"name": 'addMember',

	//add a label for your form, it will show in the form's header
	"label": 'Add New Member',

	//attach some action buttons to the form
	"actions":[
		{
			'type': 'submit',               //button type
			'label': 'Add Member',          //button label
			'btn': 'primary',               //button class name (AngularJs's Bootstrap)
			'action': function(formData) {  //operation function, returns the data entered in the form
				//add your business logic here
			}
		},
		{
			'type': 'reset',
			'label': 'Cancel',
			'btn': 'danger',
			'action': function(formData) {
				//add your business logic here
			}
		}
	]
};

//call buildForm
buildForm($scope, config);

//call buildForm
buildFormWithModal($scope, $modal, config);</code></pre>
	<em>The above code snippets demonstrates how the form configuration should be.</em>
	<br/>
	<hr/>
	<h3>Supported Inputs</h3>
	<p>
		The Form supports several types of field rendering displays; field rendering configuration differ to support the different types of how fields could be rendered.
	</p>
	<table width="100%" class="myTable">
		<thead>
			<tr>
				<th class="col1">Property Name</th>
				<th class="col2">Property Type</th>
				<th>Description</th>
			</tr>
		</thead>
		<tbody>
			<tr ng-repeat="field in form" ng-class="{'first': $first, 'last': $last}" ng-class-odd="'odd'" ng-class-even="'even'">
				<td colspan="3">
					<table width="100%">
						<tr>
							<td class="col1">{{field.name}}</td>
							<td class="col2">{{field.type}}</td>
							<td ng-bind-html="field.description"></td>
						</tr>
						<tr>
							<td class="col1"><b>Available:</b></td>
							<td colspan="2">{{field.available}}</td>
						</tr>
					</table>
				</td>
			</tr>
		</tbody>
	</table>
    <br/>
    <hr/>
    <h3>File Handling:</h3>
    <p>
        The Form Library provides support for 4 media types: Documents - Images - Audio Tracks - Videos.<br />
        Media inputs have special treatment in the form library. When provided, every input can have multiple medias, grouped under it.<br />
    </p>
    <h4>Declaring a media input:</h4>
    <pre><code class="javascript">{
    'name': 'my_files',
    'label': 'My Files',
    'type': 'document',
    'limit': 1,
    'value': []
}</code></pre>
    <p>
        The above snippet shows how a media input named my_files of type document with a maximum limit of 1 media is provided to the form library.
        The above code will result in an input of type file, for the user to browse and select a file to be uploaded.<br />
    </p>
    <br/>
    <h4>Modifying an existing media input:</h4>
    <p>
        Files should be stored in GridFS and not on the file system, this guarantees that if a service goes down, the data will not be lost.<br />
        The form adds 2 event listeners to every value in an existing media input: download - removeFile.<br />
        These listeners are used to either call a service API and download the original version of the media or to trigger a remove operation. Therefore when attempting to replace/remove an existing media input, additional information should be supplied.
    </p>
    <pre><code class="javascript">{
    'name': 'my_files',
    'label': 'My Files',
    'type': 'document',
    'limit': 1,
    'value': [
        {
            '_id': '5551aca9e179c39b760f7a1a',
            'routeName': '/my_service/files/download',
            'headers': {
                'soajsauth': 'soajs_authentication_token'
            },
            'params': {
                'env': 'dev'
            },
            'metadata': {
                'mime': 'text/plain'
            },
            'contentType': 'text/plain',
            'filename': 'my_file.txt'
        }
    ]
}</code></pre>
    <p>
        The above snippet demonstrates how a media input should be provided to the form for editing. The following table explains the entries of every object inside the array:
    </p>
    <table class="myTable" width="100%">
        <thead>
            <tr>
                <th>Property</th>
                <th>Description</th>
                <th class="">Computed</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td>_id</td>
                <td>The id of the file in GridFS.</td>
                <td>YES</td>
            </tr>
            <tr class="even">
                <td>routeName</td>
                <td>The Service API that should be called to download the original copy of this file.</td>
                <td>NO</td>
            </tr>
            <tr>
                <td>headers</td>
                <td>Any optional headers that need to be provided when calling the service APIs to either download or remove the file.</td>
                <td>NO</td>
            </tr>
            <tr class="even">
                <td>params</td>
                <td>Any optional params that need to be provided when calling the service APIs to either download or remove the file.</td>
                <td>NO</td>
            </tr>
            <tr>
                <td>metadata</td>
                <td>Computed Object by GridFS that contains the mime type information of the file.</td>
                <td>YES</td>
            </tr>
            <tr class="even">
                <td>contentType</td>
                <td>A computed value by GridFS representing the mimetype of the file</td>
                <td>YES</td>
            </tr>
            <tr>
                <td>filename</td>
                <td>Computed value by GridFS representing the name of the file without special characters and spaces.</td>
                <td>YES</td>
            </tr>
        </tbody>
    </table>
    <br/>
</div>