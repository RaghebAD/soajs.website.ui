<a id="registry"></a>
<h1>Registry</h1>
<div class="white-container">
	<p>
		SOAJS Registry offers the ability to have multiple profiles with different configuration. These profiles are located under the <b>profiles</b> folder. The path of the profile is set using an <a href="http://en.wikipedia.org/wiki/Environment_variable" target="_blank">environment variable</a> on your machine.<br/>
	</p>
    <table class="myTable" width="100%">
        <thead>
            <tr>
                <th>Env Variable</th>
                <th>Default Value</th>
                <th>Description</th>
            </tr>
        </thead>
        <tbody>
            <tr ng-class-odd="'odd'" ng-class-even="'even'" ng-repeat="oneEnv in registry">
                <td><b>{{oneEnv.env}}</b></td>
                <td>{{oneEnv.default}}</td>
                <td ng-bind-html="oneEnv.desc"></td>
            </tr>
        </tbody>
    </table>
    <br/>
	<p>
		The profile file contains the registry information that tells SOAJS the location of the core database server to use. This file gives SOAJS the information to load the core configuration and provide it to the service.
	</p>
	<p>
		The below snapshot represents what a profile file looks like:
	</p>
	<pre><code class="javascript">module.exports = {
    "name": "core_provision",
    "prefix": "",
    "servers": [
        {
            "host": "127.0.0.1",
            "port": 27017
        }
    ],
    "credentials": null,
    "URLParam": {
        "connectTimeoutMS": 0,
        "socketTimeoutMS": 0,
        "maxPoolSize": 5,
        "wtimeoutMS": 0,
        "slaveOk": true
    },
    "extraParam": {
        "db": {
            "native_parser": true
        },
        "server": {
            "auto_reconnect": true
        }
    }
};</code></pre>
	<p>
		The above file, tells SOAJS that the location of <b>core_provision</b> where the core information resides is at "127.0.0.1" via port "27017" and that no credentials are needed to connect to it.
	</p>
	<p>
		The remaining properties and details such as <b>URLParam</b> &amp; <b>extraParam</b> are needed by MongoDB Driver to establish a connection to the database. This information is explained and documented on <a target="_blank" href="http://mongodb.github.io/node-mongodb-native/driver-articles/mongoclient.html#mongoclient-connect">Mongodb Website</a>.
	</p>
	<p>
		If you are familiar with MongoDB driver configuration, you can update the content of this file to support multiple servers, add credentials and restrict the database connection to specific accounts, provide support for replicaSet...etc
	</p>
	<hr/>
	<p>
		The below tabs contain code examples snippets of what the <b>servers</b>, <b>URLParam</b> &amp; <b>extraParam</b> might look like, for more information, checkout <a target="_blank" href="http://mongodb.github.io/node-mongodb-native/driver-articles/mongoclient.html#mongoclient-connect">Mongodb Website</a>:
	</p>
	<tabset>
		<tab heading="serversExample">
			<pre><code class="javascript">module.exports = {
	"prefix": "",
	"credentials": {"username":"","password":""},
	"servers": [
		{
			"host": "127.0.0.1",
			"port": 27017
		}
	]
};</code></pre>
		</tab>
		<tab heading="optionsExample">
			<pre><code class="javascript">module.exports = {
	"URLParam": {
		"replicaSet": "rs",
		"ssl": false,
		"connectTimeoutMS": 0,
		"socketTimeoutMS": 0,
		"maxPoolSize": 5,
		"w": "majority",
		"wtimeoutMS": 0,
		"journal": false,
		"fsync": false,
		"authSource": null,
		"slaveOk": false,
		"readPreference": "primary",
		"readPreferenceTags": "TAG"
	},
	"extraParam": {
		"db": {
			"w": "majority",
			"wtimeout": 0,
			"fsync": false,
			"journal": false,
			"readPreference": "primary",
			"native_parser": true,
			"forceServerObjectId": false,
			"pkFactory": {},
			"serializeFunctions": false,
			"raw": false,
			"recordQueryStats": false,
			"retryMiliSeconds": 5000,
			"numberOfRetries": 5,
			"bufferMaxEntries": -1
		},
		"server": {
			"readPreference": "primary",
			"ssl": false,
			"slaveOk": false,
			"poolSize": 1,
			"socketOptions": {"noDelay": false, "keepAlive": 1, "connectTimeoutMS": 0, "socketTimeoutMS": 0},
			"logger": null,
			"auto_reconnect": true,
			"disableDriverBSONSizeCheck": false
		},
		"replSet": {
			"ha": true,
			"haInterval": 2000,
			"reconnectWait": 1000,
			"retries": 30,
			"rs_name": "rs",
			"socketOptions": null,
			"readPreference": "primary",
			"strategy": null,
			"secondaryAcceptableLatencyMS": 15,
			"connectArbiter": false
		},
		"mongos": {
			"socketOptions": null,
			"ha": true,
			"haInterval": 2000
		}
	}
};</code></pre>
		</tab>
	</tabset>
	<script>renderCodeSnippets();</script>
</div>