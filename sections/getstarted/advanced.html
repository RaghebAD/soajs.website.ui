<div id="advancedStep">
	<a id="top"></a><h1>DevOps &amp; TechOps</h1>
	<div class="white-container">
		<p>
			As Explained in the previous steps, it is very simple and easy to build a service with SOAJS and to add APIs under that service. You also noticed that each service runs on 2 unique ports where the first is the default port and used to handle APIs requests and the second is the Maintenance port and used for maintenance operations.
		</p>
		<p>
			Now when it comes to deployment, most probably you will not deploy one instance of a service on a production environment, you will probably deploy many instances so that in case one is down, you have redundancy and the traffic gets redirected to the remaining instances. This means that you need to keep an eye on which service instance is down when it happens.
		</p>
		<p>
			SOAJS is equipped to handle this task and monitor your services as well as check if they are healthy and running, then ping you when something happens that require your intervention. SOAJS comes with features that TechOps and DevOps need during deployment and even after the services are up and running, and handles the awareness between these services on the cloud.
		</p>
		<hr/>
		<h3>Controller</h3>
		<p>
			SOAJS controller is designed to handle the awareness among your services. The controller checks if all the registered services are running and healthy on a regular basis. Upon start, it makes a list of all the services IP addresses and ports and checks their status. It refreshes that list on a regular basis. If a service with several instances running thus providing redundancy for example and one of them becomes unreachable for a certain reason, the controller detects that change and notifies you that this service for this IP address is not healthy anymore and unreachable.
		</p>
		<p>
			You can have multiple controllers running at the same time. Should one go down, the others remain functional and your cloud remains accessible and working. Controllers also distribute the load on the services; if you have 4 controllers where each controller forwards requests to 4 instances of a service, then your cloud performance will highly increase and traffic handling becomes faster.<br />
			The following image demonstrates the architecture of how controllers work with SOAJS services as well as presence of multiple controller instances communicating with multiple services instances in SOAJS's cloud.
			<img ng-src="images/documentation/deployment-2-options.png" class="full-image" />
		</p>
		<p>
			The above 2 images represent a cloud of SOAJS services each having up to 4 controllers instances and N number of services for Urac, oAuth and Your Service. The idea here is to elaborate that you can have many instances of one service for redundancy, so we created 4 instances of the controllers and N instances of the other services.
		</p>
		<p>
			You also notice that the image on the left has Nginx as its first layer whereas the one on the right doesn't. Nginx is used as the first layer if you have static content, want to use certificates, optimize HTTP connections, caching and high-performance HTTP compression...etc</p>
		<p>
			Nginx is added as the first layer but SOAJS cloud does not need Nginx to work thus the image on the right. SOAJS doesn't force you to have the above architecture as well, you can create as many instances as you want and distribute them on your machines depending on the traffic you have; the above images are a simple suggestion of how you can have a cloud with multiple services and redundancy running.
		</p>
		<hr/>
		<h3>Installation and Tests</h3>
		<p>
			To install and run the controller, execute the below steps:
		</p>
		<pre><code class="bash"># go to /opt/soajs/node_modules
$ cd /opt/soajs/node_modules/

# install and run the controller
$ npm install soajs.controller
$ cd soajs.controller
$ node .</code></pre>
		<p>
			Once the controller is installed and started, it will run on two ports like all other services: 4000 - 5000. You can access the controller on your machine via http://127.0.0.1:4000 and http://127.0.0.1:5000.<br />
			Perform a heartbeat check on the controller to see its status:
		</p>
		<fieldset>
			<legend>Heartbeat Controller</legend>
			<div class="insideFieldsetMain">
				<div>
					<pre><code class="bash">$ curl -X GET "http://127.0.0.1:5000/heartbeat"</code></pre>
					<h6><u>Response:</u></h6>
					<pre><code class="bash">{
	"result":true,
	"ts":1425054123486,
	"service": {
		"service":"CONTROLLER",
		"type":"rest",
		"route":"/heartbeat"
	}
}</code></pre>
					<em>Great, controller is working fine.</em>
					<p>
						When a service goes down, the controller will notice that event and alert you that service x on a specific [host:port] is not healthy.
					</p>
				</div>
			</div>
		</fieldset>
		<p>
			In addition to the awareness, SOAJS controller is used as the main gateway to SOAJS cloud of services. Once the controller is turned on, when you attempt to call a service, there is no need to specify the port anymore and you don't have to worry what port this service is using. Instead, make a call to the controller and specify the name of the service followed by the API of that service.<br />
			<u>Ex:</u><br />
			Calling Example01 which runs on port 4010 as mentioned in Step2.<br />
			<b>Previous Way:</b>
			<pre><code class="bash">$ CURL -X GET "http://127.0.0.1:4010/testGet?firstName=John&lastName=Doe"</code></pre>
			<b>Using Controller:</b>
			<pre><code class="bash">$ CURL -X GET "http://127.0.0.1:4000/example01/testGet?firstName=John&lastName=Doe"</code></pre>
			Both command invoke the same API in the same service, the only difference this time is that you need to memorize only the controller's port.
		</p>
		<p>
			You can learn more about the controller and its features in <a href="#/documentation/services/controller">Controller</a> section under documentation.
		</p>
		<hr/>
		<h3>Dashboard</h3>
		<p>
			SOAJS dashboard is designed to help you monitor the health and awareness that the controller is sending. As mentioned above when the controller output his analytics, you can view them via a graphical interface from the dashboard. The dashboard is equipped with many features to help you go throw the logs reported by the controller and conduct maintenance operations.
		</p>
		<p>
			The dashboard also helps you in managing and configuring the different environments you have: development - staging - production, and provides you with the ability to manage the core database information such as products, tenants, access levels, users accounts and other. This comes in handy when performing TechOps and DevOps operational tasks.
		</p>
		<p>
			The dashboard can be installed via npm like all SOAJS packages:
		</p>
		<pre><code class="bash"># go to /opt/soajs/node_modules/
$ cd /opt/soajs/node_modules/

# install and run the dashboard
$ npm install soajs.dashboard
$ cd soajs.dashboard/service
$ node .</code></pre>
		<p>
			The dashboard is split up to 2 sections: Service and GUI. The above commands, instruct you how to get the service up and running. To run the GUI, you need Nginx installed, and you need to point out in the Nginx configuration the location of soajs.dashboard/ui folder. To get the dashboard UI running, checkout <a href="#/documentation/ui/dashboard">Dashboard/How to set it up</a> section under documentation.
		</p>
		<hr/>
		<h3>Deployment</h3>
		<p>
			You can deploy SOAJS as follow:
		</p>
		<ul>
			<li>Manually
				<ul>
					<li><a href="#/documentation/deployment/manual-mac">Click here</a> if you are using <b>MAC</b></li>
					<li><a href="#/documentation/deployment/manual-linux">Click here</a> if you are using <b>Linux</b></li>
				</ul>
			</li>
			<li>Docker
				<ul>
					<li><a href="#/documentation/deployment/docker-mac">Click here</a> if you are using <b>MAC</b></li>
					<li><a href="#/documentation/deployment/docker-linux">Click here</a> if you are using <b>Linux</b></li>
					<li><a href="#/documentation/deployment/docker-files">Click here</a> to view the list of <b>SOAJS Docker Images</b></li>
				</ul>
			</li>
		</ul>
	</div>
</div>